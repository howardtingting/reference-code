{"ast":null,"code":"/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @emails oncall+relay\n * \n * @format\n */\n// flowlint ambiguous-object-type:error\n'use strict';\n\nvar useRelayEnvironment = require('./useRelayEnvironment');\n\nvar _require = require('react'),\n    useEffect = _require.useEffect,\n    useRef = _require.useRef;\n/**\n * This hook subscribes a callback to the invalidation state of the given data\n * ids.\n * Any time the invalidation state of the given data ids changes, the provided\n * callback will be called.\n * If new ids or a new callback are provided, the subscription will be\n * re-established and the previous one will be disposed.\n * The subscription will automatically be disposed on unmount\n */\n\n\nfunction useSubscribeToInvalidationState(dataIDs, callback) {\n  var environment = useRelayEnvironment();\n  var disposableRef = useRef(null);\n  var stableDataIDs = Array.from(dataIDs).sort().join('');\n  useEffect(function () {\n    var store = environment.getStore();\n    var invalidationState = store.lookupInvalidationState(dataIDs);\n    var disposable = store.subscribeToInvalidationState(invalidationState, callback);\n    disposableRef.current = disposable;\n    return function () {\n      return disposable.dispose();\n    }; // Intentionally excluding dataIDs, since we're using stableDataIDs\n    // instead\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [stableDataIDs, callback, environment]);\n  return {\n    dispose: function dispose() {\n      if (disposableRef.current != null) {\n        disposableRef.current.dispose();\n      }\n    }\n  };\n}\n\nmodule.exports = useSubscribeToInvalidationState;","map":{"version":3,"sources":["/home/ting/Desktop/Projects/tutorials/GRAPHQL/from_react/relay_starter/node_modules/react-relay/lib/relay-hooks/useSubscribeToInvalidationState.js"],"names":["useRelayEnvironment","require","_require","useEffect","useRef","useSubscribeToInvalidationState","dataIDs","callback","environment","disposableRef","stableDataIDs","Array","from","sort","join","store","getStore","invalidationState","lookupInvalidationState","disposable","subscribeToInvalidationState","current","dispose","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,mBAAmB,GAAGC,OAAO,CAAC,uBAAD,CAAjC;;AAEA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,OAAD,CAAtB;AAAA,IACIE,SAAS,GAAGD,QAAQ,CAACC,SADzB;AAAA,IAEIC,MAAM,GAAGF,QAAQ,CAACE,MAFtB;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASC,+BAAT,CAAyCC,OAAzC,EAAkDC,QAAlD,EAA4D;AAC1D,MAAIC,WAAW,GAAGR,mBAAmB,EAArC;AACA,MAAIS,aAAa,GAAGL,MAAM,CAAC,IAAD,CAA1B;AACA,MAAIM,aAAa,GAAGC,KAAK,CAACC,IAAN,CAAWN,OAAX,EAAoBO,IAApB,GAA2BC,IAA3B,CAAgC,EAAhC,CAApB;AACAX,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAIY,KAAK,GAAGP,WAAW,CAACQ,QAAZ,EAAZ;AACA,QAAIC,iBAAiB,GAAGF,KAAK,CAACG,uBAAN,CAA8BZ,OAA9B,CAAxB;AACA,QAAIa,UAAU,GAAGJ,KAAK,CAACK,4BAAN,CAAmCH,iBAAnC,EAAsDV,QAAtD,CAAjB;AACAE,IAAAA,aAAa,CAACY,OAAd,GAAwBF,UAAxB;AACA,WAAO,YAAY;AACjB,aAAOA,UAAU,CAACG,OAAX,EAAP;AACD,KAFD,CALoB,CAOjB;AACH;AACA;AACD,GAVQ,EAUN,CAACZ,aAAD,EAAgBH,QAAhB,EAA0BC,WAA1B,CAVM,CAAT;AAWA,SAAO;AACLc,IAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,UAAIb,aAAa,CAACY,OAAd,IAAyB,IAA7B,EAAmC;AACjCZ,QAAAA,aAAa,CAACY,OAAd,CAAsBC,OAAtB;AACD;AACF;AALI,GAAP;AAOD;;AAEDC,MAAM,CAACC,OAAP,GAAiBnB,+BAAjB","sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @emails oncall+relay\n * \n * @format\n */\n// flowlint ambiguous-object-type:error\n'use strict';\n\nvar useRelayEnvironment = require('./useRelayEnvironment');\n\nvar _require = require('react'),\n    useEffect = _require.useEffect,\n    useRef = _require.useRef;\n/**\n * This hook subscribes a callback to the invalidation state of the given data\n * ids.\n * Any time the invalidation state of the given data ids changes, the provided\n * callback will be called.\n * If new ids or a new callback are provided, the subscription will be\n * re-established and the previous one will be disposed.\n * The subscription will automatically be disposed on unmount\n */\n\n\nfunction useSubscribeToInvalidationState(dataIDs, callback) {\n  var environment = useRelayEnvironment();\n  var disposableRef = useRef(null);\n  var stableDataIDs = Array.from(dataIDs).sort().join('');\n  useEffect(function () {\n    var store = environment.getStore();\n    var invalidationState = store.lookupInvalidationState(dataIDs);\n    var disposable = store.subscribeToInvalidationState(invalidationState, callback);\n    disposableRef.current = disposable;\n    return function () {\n      return disposable.dispose();\n    }; // Intentionally excluding dataIDs, since we're using stableDataIDs\n    // instead\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [stableDataIDs, callback, environment]);\n  return {\n    dispose: function dispose() {\n      if (disposableRef.current != null) {\n        disposableRef.current.dispose();\n      }\n    }\n  };\n}\n\nmodule.exports = useSubscribeToInvalidationState;"]},"metadata":{},"sourceType":"script"}